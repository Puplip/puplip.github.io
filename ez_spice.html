<html>
    <head>
        <meta charset="UTF-8"></meta>
        <title>Puplip.xyz</title>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link href="css/materialize.min.css" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script>
            $(document).ready(() => {
                M.AutoInit();
            });
        </script>
        <script>

            function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            function clearIntervals(intervals){
                intervals.map(clearInterval);
                intervals.splice(0,intervals.length);
            }
            var spin_interval = [];
            var spice_interval = [];
            var spice_time = 0;
            function spin_tick(){
                spice_time = Math.random()*7+3;
                document.getElementById("spice_number").innerHTML = spice_time.toFixed(2);
            }
            function spin_toggle(){
                    
                clearIntervals(spice_interval);

                if(spin_interval.length){

                    clearIntervals(spin_interval);

                    document.getElementById("spice_button").innerHTML = "Start";
                } else {
                    spin_interval.push(setInterval(spin_tick,20));
                    document.getElementById("spice_button").innerHTML = "Stop";
                }

            }
            function spice_tick(){
                if(spice_time > 0.05){
                    spice_time -= 0.05;
                    document.getElementById("spice_number").innerHTML = spice_time.toFixed(2);
                } else {
                    spice_time = 0;
                    document.getElementById("spice_number").innerHTML = spice_time.toFixed(2);
                    clearIntervals(spice_interval);
                }
            }
            function spice_toggle(){
                if(!spice_interval.length){
                    if(spin_interval.length){
                        clearIntervals(spin_interval);
                    }
                    spice_interval.push(setInterval(spice_tick,50));
                }
            }
        </script>
        <style>
        </style>
    </head>
    <body class="grey">
        <div class="navbar-fixed">
            <nav>
                <div class="row nav-wrapper grey darken-4">
                    <div class="col s12">
                        <a href="index" class="brand-logo">Puplip.xyz</a>
                        <a href="#" data-target="mobile-sidenav" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                        <ul id="nav-mobile" class="right hide-on-med-and-down">
                            <li class = "active" ><a href="index">Home</a></li>
                            <li><a href="ez_spice">Spice</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
        <ul class="sidenav row grey darken-1" id="mobile-sidenav">
            <li>
                <div class="col s12">
                    <div class="card grey darken-4">
                        <div class="card-content">
                            <a class="card-title white-text" href="index">Home</a>
                        </div>
                    </div>
                </div>
            </li>
            <li>
                <div class="col s12">
                    <div class="card grey darken-4">
                        <div class="card-content">
                            <a class="card-title white-text" href="ez_spice">Spice</a>
                        </div>
                    </div>
                </div>
            </li>
        </ul>
        <h1></h1>
        <div class="container" style="user-select: none;">
            <div class="card grey lighten-3">
                <div class="card-content">
                    <div class="card-title"id="spice_number">42</div>
                </div>
                <div class="card-content">
                    <a class="waves-effect waves-light btn-flat grey darken-2" id="spice_button" onclick="spin_toggle()">Start</a>
                    <a class="waves-effect waves-light btn-flat orange" onclick="spice_toggle()">Spice</a>
                </div>
            </div>
        </div>
        <script src="js/materialize.min.js"></script>
    </body>
</html>